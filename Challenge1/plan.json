{"format_version":"1.1","terraform_version":"1.3.6","variables":{"app_host_name":{"value":"appserver"},"app_os_password":{"value":"@AppLogin123"},"app_username":{"value":"app_user"},"appsubnet_iprange":{"value":"10.210.2.0/24"},"dbsubnet_iprange":{"value":"10.210.3.0/24"},"environment":{"value":"dev"},"location":{"value":"eastus"},"name":{"value":"three-tier-architecture"},"primary_database":{"value":"sql-database-dev"},"primary_database_admin":{"value":"sqladmin"},"primary_database_password":{"value":"Pa$$w0rd123"},"primary_database_version":{"value":"12.0"},"vnet_iprange":{"value":"10.210.0.0/16"},"web_host_name":{"value":"webserver"},"web_os_password":{"value":"@WebLogin123"},"web_username":{"value":"web_user"},"websubnet_iprange":{"value":"10.210.1.0/24"}},"planned_values":{"root_module":{"child_modules":[{"resources":[{"address":"module.backend_db.azurerm_mssql_database.db","mode":"managed","type":"azurerm_mssql_database","name":"db","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":1,"values":{"create_mode":"Default","elastic_pool_id":null,"geo_backup_enabled":true,"import":[],"name":"sql_db_01","recover_database_id":null,"restore_dropped_database_id":null,"storage_account_type":"Local","tags":null,"timeouts":null,"transparent_data_encryption_enabled":true},"sensitive_values":{"import":[],"long_term_retention_policy":[],"short_term_retention_policy":[],"threat_detection_policy":[]}},{"address":"module.backend_db.azurerm_mssql_server.sqlserver01","mode":"managed","type":"azurerm_mssql_server","name":"sqlserver01","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"administrator_login":"sqladmin","administrator_login_password":"Pa$$w0rd123","azuread_administrator":[],"connection_policy":"Default","identity":[],"location":"eastus","minimum_tls_version":"1.2","name":"sql-database-dev","outbound_network_restriction_enabled":false,"public_network_access_enabled":true,"resource_group_name":"three-tier-architecture-RG","tags":{"environment":"dev"},"timeouts":null,"version":"12.0"},"sensitive_values":{"azuread_administrator":[],"identity":[],"restorable_dropped_database_ids":[],"tags":{}}}],"address":"module.backend_db"},{"resources":[{"address":"module.nsgroup.azurerm_network_security_group.app-nsg","mode":"managed","type":"azurerm_network_security_group","name":"app-nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"eastus","name":"app-nsg","resource_group_name":"three-tier-architecture-RG","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Inbound","name":"ssh-rule-1","priority":100,"protocol":"Tcp","source_address_prefix":"10.210.1.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]},{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Outbound","name":"ssh-rule-2","priority":101,"protocol":"Tcp","source_address_prefix":"10.210.1.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"sensitive_values":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}},{"address":"module.nsgroup.azurerm_network_security_group.db-nsg","mode":"managed","type":"azurerm_network_security_group","name":"db-nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"eastus","name":"db-nsg","resource_group_name":"three-tier-architecture-RG","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"3306","destination_port_ranges":[],"direction":"Inbound","name":"ssh-rule-1","priority":101,"protocol":"Tcp","source_address_prefix":"10.210.2.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]},{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"3306","destination_port_ranges":[],"direction":"Outbound","name":"ssh-rule-2","priority":102,"protocol":"Tcp","source_address_prefix":"10.210.2.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]},{"access":"Deny","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"3306","destination_port_ranges":[],"direction":"Outbound","name":"ssh-rule-3","priority":100,"protocol":"Tcp","source_address_prefix":"10.210.1.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"sensitive_values":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}},{"address":"module.nsgroup.azurerm_network_security_group.web-nsg","mode":"managed","type":"azurerm_network_security_group","name":"web-nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"eastus","name":"web-nsg","resource_group_name":"three-tier-architecture-RG","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Inbound","name":"ssh-rule-1","priority":101,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]},{"access":"Deny","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Inbound","name":"ssh-rule-2","priority":100,"protocol":"Tcp","source_address_prefix":"10.210.3.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"sensitive_values":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}},{"address":"module.nsgroup.azurerm_subnet_network_security_group_association.app-nsg-subnet","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"app-nsg-subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.nsgroup.azurerm_subnet_network_security_group_association.db-nsg-subnet","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"db-nsg-subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.nsgroup.azurerm_subnet_network_security_group_association.web-nsg-subnet","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"web-nsg-subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}}],"address":"module.nsgroup"},{"resources":[{"address":"module.resourcegroup.azurerm_resource_group.rsg_grp","mode":"managed","type":"azurerm_resource_group","name":"rsg_grp","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"eastus","name":"three-tier-architecture-RG","tags":{"environment":"dev"},"timeouts":null},"sensitive_values":{"tags":{}}}],"address":"module.resourcegroup"},{"resources":[{"address":"module.vm_compute.azurerm_availability_set.app_availabilty_set","mode":"managed","type":"azurerm_availability_set","name":"app_availabilty_set","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"eastus","managed":true,"name":"app_availabilty_set","platform_fault_domain_count":3,"platform_update_domain_count":5,"proximity_placement_group_id":null,"resource_group_name":"three-tier-architecture-RG","tags":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vm_compute.azurerm_availability_set.web_availabilty_set","mode":"managed","type":"azurerm_availability_set","name":"web_availabilty_set","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"eastus","managed":true,"name":"web_availabilty_set","platform_fault_domain_count":3,"platform_update_domain_count":5,"proximity_placement_group_id":null,"resource_group_name":"three-tier-architecture-RG","tags":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vm_compute.azurerm_network_interface.app-net-interface","mode":"managed","type":"azurerm_network_interface","name":"app-net-interface","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"edge_zone":null,"enable_accelerated_networking":false,"enable_ip_forwarding":false,"ip_configuration":[{"name":"app-webserver","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"eastus","name":"app-network","resource_group_name":"three-tier-architecture-RG","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"module.vm_compute.azurerm_network_interface.web-net-interface","mode":"managed","type":"azurerm_network_interface","name":"web-net-interface","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"edge_zone":null,"enable_accelerated_networking":false,"enable_ip_forwarding":false,"ip_configuration":[{"name":"web-webserver","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"eastus","name":"web-network","resource_group_name":"three-tier-architecture-RG","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"module.vm_compute.azurerm_virtual_machine.app-vm","mode":"managed","type":"azurerm_virtual_machine","name":"app-vm","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"boot_diagnostics":[],"delete_data_disks_on_termination":false,"delete_os_disk_on_termination":true,"location":"eastus","name":"vm-app-dev-01","os_profile":[{"admin_password":"@AppLogin123","admin_username":"app_user","computer_name":"appserver"}],"os_profile_linux_config":[{"disable_password_authentication":false,"ssh_keys":[]}],"os_profile_secrets":[],"os_profile_windows_config":[],"plan":[],"primary_network_interface_id":null,"proximity_placement_group_id":null,"resource_group_name":"three-tier-architecture-RG","storage_image_reference":[{"id":"","offer":"UbuntuServer","publisher":"Canonical","sku":"22.04-LTS","version":"latest"}],"storage_os_disk":[{"caching":"ReadWrite","create_option":"FromImage","image_uri":null,"managed_disk_type":"Standard_LRS","name":"app-disk","vhd_uri":null,"write_accelerator_enabled":false}],"tags":null,"timeouts":null,"vm_size":"Standard_D2s_v3","zones":null},"sensitive_values":{"additional_capabilities":[],"boot_diagnostics":[],"identity":[],"network_interface_ids":[],"os_profile":[{}],"os_profile_linux_config":[{"ssh_keys":[]}],"os_profile_secrets":[],"os_profile_windows_config":[],"plan":[],"storage_data_disk":[],"storage_image_reference":[{}],"storage_os_disk":[{}]}},{"address":"module.vm_compute.azurerm_virtual_machine.web-vm","mode":"managed","type":"azurerm_virtual_machine","name":"web-vm","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"boot_diagnostics":[],"delete_data_disks_on_termination":false,"delete_os_disk_on_termination":true,"location":"eastus","name":"vm-web-dev-01","os_profile":[{"admin_password":"@WebLogin123","admin_username":"web_user","computer_name":"webserver"}],"os_profile_linux_config":[{"disable_password_authentication":false,"ssh_keys":[]}],"os_profile_secrets":[],"os_profile_windows_config":[],"plan":[],"primary_network_interface_id":null,"proximity_placement_group_id":null,"resource_group_name":"three-tier-architecture-RG","storage_image_reference":[{"id":"","offer":"UbuntuServer","publisher":"Canonical","sku":"22.04-LTS","version":"latest"}],"storage_os_disk":[{"caching":"ReadWrite","create_option":"FromImage","image_uri":null,"managed_disk_type":"Standard_LRS","name":"web-disk","vhd_uri":null,"write_accelerator_enabled":false}],"tags":null,"timeouts":null,"vm_size":"Standard_D2s_v3","zones":null},"sensitive_values":{"additional_capabilities":[],"boot_diagnostics":[],"identity":[],"network_interface_ids":[],"os_profile":[{}],"os_profile_linux_config":[{"ssh_keys":[]}],"os_profile_secrets":[],"os_profile_windows_config":[],"plan":[],"storage_data_disk":[],"storage_image_reference":[{}],"storage_os_disk":[{}]}}],"address":"module.vm_compute"},{"resources":[{"address":"module.vnet_module.azurerm_subnet.app-subnet","mode":"managed","type":"azurerm_subnet","name":"app-subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.210.2.0/24"],"delegation":[],"name":"snet-app-dev-002","resource_group_name":"three-tier-architecture-RG","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-dev-eastus-001"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"module.vnet_module.azurerm_subnet.db-subnet","mode":"managed","type":"azurerm_subnet","name":"db-subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.210.3.0/24"],"delegation":[],"name":"snet-db-dev-003","resource_group_name":"three-tier-architecture-RG","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-dev-eastus-001"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"module.vnet_module.azurerm_subnet.web-subnet","mode":"managed","type":"azurerm_subnet","name":"web-subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.210.1.0/24"],"delegation":[],"name":"snet-web-dev-001","resource_group_name":"three-tier-architecture-RG","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-dev-eastus-001"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"module.vnet_module.azurerm_virtual_network.vnet01","mode":"managed","type":"azurerm_virtual_network","name":"vnet01","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["10.210.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"flow_timeout_in_minutes":null,"location":"eastus","name":"vnet-dev-eastus-001","resource_group_name":"three-tier-architecture-RG","tags":null,"timeouts":null},"sensitive_values":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"subnet":[]}}],"address":"module.vnet_module"}]}},"resource_drift":[{"address":"azurerm_resource_group.rg-grp","mode":"managed","type":"azurerm_resource_group","name":"rg-grp","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["delete"],"before":{"id":"/subscriptions/9c07f729-7231-4273-aad4-c18e50978806/resourceGroups/Three-tier-arch","location":"eastus","name":"Three-tier-arch","tags":null,"timeouts":null},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}}],"resource_changes":[{"address":"module.backend_db.azurerm_mssql_database.db","module_address":"module.backend_db","mode":"managed","type":"azurerm_mssql_database","name":"db","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"create_mode":"Default","elastic_pool_id":null,"geo_backup_enabled":true,"import":[],"name":"sql_db_01","recover_database_id":null,"restore_dropped_database_id":null,"storage_account_type":"Local","tags":null,"timeouts":null,"transparent_data_encryption_enabled":true},"after_unknown":{"auto_pause_delay_in_minutes":true,"collation":true,"creation_source_database_id":true,"id":true,"import":[],"ledger_enabled":true,"license_type":true,"long_term_retention_policy":true,"maintenance_configuration_name":true,"max_size_gb":true,"min_capacity":true,"read_replica_count":true,"read_scale":true,"restore_point_in_time":true,"sample_name":true,"server_id":true,"short_term_retention_policy":true,"sku_name":true,"threat_detection_policy":true,"zone_redundant":true},"before_sensitive":false,"after_sensitive":{"import":[],"long_term_retention_policy":[],"short_term_retention_policy":[],"threat_detection_policy":[]}}},{"address":"module.backend_db.azurerm_mssql_server.sqlserver01","module_address":"module.backend_db","mode":"managed","type":"azurerm_mssql_server","name":"sqlserver01","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"administrator_login":"sqladmin","administrator_login_password":"Pa$$w0rd123","azuread_administrator":[],"connection_policy":"Default","identity":[],"location":"eastus","minimum_tls_version":"1.2","name":"sql-database-dev","outbound_network_restriction_enabled":false,"public_network_access_enabled":true,"resource_group_name":"three-tier-architecture-RG","tags":{"environment":"dev"},"timeouts":null,"version":"12.0"},"after_unknown":{"azuread_administrator":[],"fully_qualified_domain_name":true,"id":true,"identity":[],"primary_user_assigned_identity_id":true,"restorable_dropped_database_ids":true,"tags":{}},"before_sensitive":false,"after_sensitive":{"administrator_login_password":true,"azuread_administrator":[],"identity":[],"restorable_dropped_database_ids":[],"tags":{}}}},{"address":"module.nsgroup.azurerm_network_security_group.app-nsg","module_address":"module.nsgroup","mode":"managed","type":"azurerm_network_security_group","name":"app-nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"eastus","name":"app-nsg","resource_group_name":"three-tier-architecture-RG","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Inbound","name":"ssh-rule-1","priority":100,"protocol":"Tcp","source_address_prefix":"10.210.1.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]},{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Outbound","name":"ssh-rule-2","priority":101,"protocol":"Tcp","source_address_prefix":"10.210.1.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]},"before_sensitive":false,"after_sensitive":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}}},{"address":"module.nsgroup.azurerm_network_security_group.db-nsg","module_address":"module.nsgroup","mode":"managed","type":"azurerm_network_security_group","name":"db-nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"eastus","name":"db-nsg","resource_group_name":"three-tier-architecture-RG","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"3306","destination_port_ranges":[],"direction":"Inbound","name":"ssh-rule-1","priority":101,"protocol":"Tcp","source_address_prefix":"10.210.2.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]},{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"3306","destination_port_ranges":[],"direction":"Outbound","name":"ssh-rule-2","priority":102,"protocol":"Tcp","source_address_prefix":"10.210.2.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]},{"access":"Deny","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"3306","destination_port_ranges":[],"direction":"Outbound","name":"ssh-rule-3","priority":100,"protocol":"Tcp","source_address_prefix":"10.210.1.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]},"before_sensitive":false,"after_sensitive":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}}},{"address":"module.nsgroup.azurerm_network_security_group.web-nsg","module_address":"module.nsgroup","mode":"managed","type":"azurerm_network_security_group","name":"web-nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"eastus","name":"web-nsg","resource_group_name":"three-tier-architecture-RG","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Inbound","name":"ssh-rule-1","priority":101,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]},{"access":"Deny","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Inbound","name":"ssh-rule-2","priority":100,"protocol":"Tcp","source_address_prefix":"10.210.3.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]},"before_sensitive":false,"after_sensitive":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}}},{"address":"module.nsgroup.azurerm_subnet_network_security_group_association.app-nsg-subnet","module_address":"module.nsgroup","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"app-nsg-subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_security_group_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.nsgroup.azurerm_subnet_network_security_group_association.db-nsg-subnet","module_address":"module.nsgroup","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"db-nsg-subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_security_group_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.nsgroup.azurerm_subnet_network_security_group_association.web-nsg-subnet","module_address":"module.nsgroup","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"web-nsg-subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_security_group_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.resourcegroup.azurerm_resource_group.rsg_grp","module_address":"module.resourcegroup","mode":"managed","type":"azurerm_resource_group","name":"rsg_grp","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"eastus","name":"three-tier-architecture-RG","tags":{"environment":"dev"},"timeouts":null},"after_unknown":{"id":true,"tags":{}},"before_sensitive":false,"after_sensitive":{"tags":{}}}},{"address":"module.vm_compute.azurerm_availability_set.app_availabilty_set","module_address":"module.vm_compute","mode":"managed","type":"azurerm_availability_set","name":"app_availabilty_set","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"eastus","managed":true,"name":"app_availabilty_set","platform_fault_domain_count":3,"platform_update_domain_count":5,"proximity_placement_group_id":null,"resource_group_name":"three-tier-architecture-RG","tags":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vm_compute.azurerm_availability_set.web_availabilty_set","module_address":"module.vm_compute","mode":"managed","type":"azurerm_availability_set","name":"web_availabilty_set","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"eastus","managed":true,"name":"web_availabilty_set","platform_fault_domain_count":3,"platform_update_domain_count":5,"proximity_placement_group_id":null,"resource_group_name":"three-tier-architecture-RG","tags":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vm_compute.azurerm_network_interface.app-net-interface","module_address":"module.vm_compute","mode":"managed","type":"azurerm_network_interface","name":"app-net-interface","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"edge_zone":null,"enable_accelerated_networking":false,"enable_ip_forwarding":false,"ip_configuration":[{"name":"app-webserver","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"eastus","name":"app-network","resource_group_name":"three-tier-architecture-RG","tags":null,"timeouts":null},"after_unknown":{"applied_dns_servers":true,"dns_servers":true,"id":true,"internal_dns_name_label":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"subnet_id":true}],"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"module.vm_compute.azurerm_network_interface.web-net-interface","module_address":"module.vm_compute","mode":"managed","type":"azurerm_network_interface","name":"web-net-interface","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"edge_zone":null,"enable_accelerated_networking":false,"enable_ip_forwarding":false,"ip_configuration":[{"name":"web-webserver","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"eastus","name":"web-network","resource_group_name":"three-tier-architecture-RG","tags":null,"timeouts":null},"after_unknown":{"applied_dns_servers":true,"dns_servers":true,"id":true,"internal_dns_name_label":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"subnet_id":true}],"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"module.vm_compute.azurerm_virtual_machine.app-vm","module_address":"module.vm_compute","mode":"managed","type":"azurerm_virtual_machine","name":"app-vm","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"boot_diagnostics":[],"delete_data_disks_on_termination":false,"delete_os_disk_on_termination":true,"location":"eastus","name":"vm-app-dev-01","os_profile":[{"admin_password":"@AppLogin123","admin_username":"app_user","computer_name":"appserver"}],"os_profile_linux_config":[{"disable_password_authentication":false,"ssh_keys":[]}],"os_profile_secrets":[],"os_profile_windows_config":[],"plan":[],"primary_network_interface_id":null,"proximity_placement_group_id":null,"resource_group_name":"three-tier-architecture-RG","storage_image_reference":[{"id":"","offer":"UbuntuServer","publisher":"Canonical","sku":"22.04-LTS","version":"latest"}],"storage_os_disk":[{"caching":"ReadWrite","create_option":"FromImage","image_uri":null,"managed_disk_type":"Standard_LRS","name":"app-disk","vhd_uri":null,"write_accelerator_enabled":false}],"tags":null,"timeouts":null,"vm_size":"Standard_D2s_v3","zones":null},"after_unknown":{"additional_capabilities":[],"availability_set_id":true,"boot_diagnostics":[],"id":true,"identity":true,"license_type":true,"network_interface_ids":true,"os_profile":[{"custom_data":true}],"os_profile_linux_config":[{"ssh_keys":[]}],"os_profile_secrets":[],"os_profile_windows_config":[],"plan":[],"storage_data_disk":true,"storage_image_reference":[{}],"storage_os_disk":[{"disk_size_gb":true,"managed_disk_id":true,"os_type":true}]},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"boot_diagnostics":[],"identity":[],"network_interface_ids":[],"os_profile":true,"os_profile_linux_config":[{"ssh_keys":[]}],"os_profile_secrets":[],"os_profile_windows_config":[],"plan":[],"storage_data_disk":[],"storage_image_reference":[{}],"storage_os_disk":[{}]}}},{"address":"module.vm_compute.azurerm_virtual_machine.web-vm","module_address":"module.vm_compute","mode":"managed","type":"azurerm_virtual_machine","name":"web-vm","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"boot_diagnostics":[],"delete_data_disks_on_termination":false,"delete_os_disk_on_termination":true,"location":"eastus","name":"vm-web-dev-01","os_profile":[{"admin_password":"@WebLogin123","admin_username":"web_user","computer_name":"webserver"}],"os_profile_linux_config":[{"disable_password_authentication":false,"ssh_keys":[]}],"os_profile_secrets":[],"os_profile_windows_config":[],"plan":[],"primary_network_interface_id":null,"proximity_placement_group_id":null,"resource_group_name":"three-tier-architecture-RG","storage_image_reference":[{"id":"","offer":"UbuntuServer","publisher":"Canonical","sku":"22.04-LTS","version":"latest"}],"storage_os_disk":[{"caching":"ReadWrite","create_option":"FromImage","image_uri":null,"managed_disk_type":"Standard_LRS","name":"web-disk","vhd_uri":null,"write_accelerator_enabled":false}],"tags":null,"timeouts":null,"vm_size":"Standard_D2s_v3","zones":null},"after_unknown":{"additional_capabilities":[],"availability_set_id":true,"boot_diagnostics":[],"id":true,"identity":true,"license_type":true,"network_interface_ids":true,"os_profile":[{"custom_data":true}],"os_profile_linux_config":[{"ssh_keys":[]}],"os_profile_secrets":[],"os_profile_windows_config":[],"plan":[],"storage_data_disk":true,"storage_image_reference":[{}],"storage_os_disk":[{"disk_size_gb":true,"managed_disk_id":true,"os_type":true}]},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"boot_diagnostics":[],"identity":[],"network_interface_ids":[],"os_profile":true,"os_profile_linux_config":[{"ssh_keys":[]}],"os_profile_secrets":[],"os_profile_windows_config":[],"plan":[],"storage_data_disk":[],"storage_image_reference":[{}],"storage_os_disk":[{}]}}},{"address":"module.vnet_module.azurerm_subnet.app-subnet","module_address":"module.vnet_module","mode":"managed","type":"azurerm_subnet","name":"app-subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.210.2.0/24"],"delegation":[],"name":"snet-app-dev-002","resource_group_name":"three-tier-architecture-RG","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-dev-eastus-001"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"module.vnet_module.azurerm_subnet.db-subnet","module_address":"module.vnet_module","mode":"managed","type":"azurerm_subnet","name":"db-subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.210.3.0/24"],"delegation":[],"name":"snet-db-dev-003","resource_group_name":"three-tier-architecture-RG","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-dev-eastus-001"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"module.vnet_module.azurerm_subnet.web-subnet","module_address":"module.vnet_module","mode":"managed","type":"azurerm_subnet","name":"web-subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.210.1.0/24"],"delegation":[],"name":"snet-web-dev-001","resource_group_name":"three-tier-architecture-RG","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-dev-eastus-001"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"module.vnet_module.azurerm_virtual_network.vnet01","module_address":"module.vnet_module","mode":"managed","type":"azurerm_virtual_network","name":"vnet01","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_space":["10.210.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"flow_timeout_in_minutes":null,"location":"eastus","name":"vnet-dev-eastus-001","resource_group_name":"three-tier-architecture-RG","tags":null,"timeouts":null},"after_unknown":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":true,"guid":true,"id":true,"subnet":true},"before_sensitive":false,"after_sensitive":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"subnet":[]}}}],"configuration":{"provider_config":{"azurerm":{"name":"azurerm","full_name":"registry.terraform.io/hashicorp/azurerm","version_constraint":"3.37.0","expressions":{"features":[{}]}}},"root_module":{"module_calls":{"backend_db":{"source":"./modules/backend_db","expressions":{"environment":{"references":["var.environment"]},"location":{"references":["module.resourcegroup.location_id","module.resourcegroup"]},"primary_database":{"references":["var.primary_database"]},"primary_database_admin":{"references":["var.primary_database_admin"]},"primary_database_password":{"references":["var.primary_database_password"]},"primary_database_version":{"references":["var.primary_database_version"]},"resource_group":{"references":["module.resourcegroup.rg_name","module.resourcegroup"]}},"module":{"resources":[{"address":"azurerm_mssql_database.db","mode":"managed","type":"azurerm_mssql_database","name":"db","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"sql_db_01"},"server_id":{"references":["azurerm_mssql_server.sqlserver01.id","azurerm_mssql_server.sqlserver01"]},"storage_account_type":{"constant_value":"Local"}},"schema_version":1},{"address":"azurerm_mssql_server.sqlserver01","mode":"managed","type":"azurerm_mssql_server","name":"sqlserver01","provider_config_key":"azurerm","expressions":{"administrator_login":{"references":["var.primary_database_admin"]},"administrator_login_password":{"references":["var.primary_database_password"]},"location":{"references":["var.location"]},"minimum_tls_version":{"constant_value":"1.2"},"name":{"references":["var.primary_database"]},"resource_group_name":{"references":["var.resource_group"]},"tags":{"references":["var.environment"]},"version":{"references":["var.primary_database_version"]}},"schema_version":0}],"variables":{"environment":{"default":"dev","description":"Environment to deploy"},"location":{},"primary_database":{},"primary_database_admin":{},"primary_database_password":{},"primary_database_version":{},"resource_group":{}}},"depends_on":["module.resourcegroup"]},"nsgroup":{"source":"./modules/nsgroup","expressions":{"app_subnet_id":{"references":["module.vnet_module.appsubnet_id","module.vnet_module"]},"db_subnet_id":{"references":["module.vnet_module.dbsubnet_id","module.vnet_module"]},"location":{"references":["module.resourcegroup.location_id","module.resourcegroup"]},"resource_group":{"references":["module.resourcegroup.rg_name","module.resourcegroup"]},"web_subnet_id":{"references":["module.vnet_module.websubnet_id","module.vnet_module"]}},"module":{"resources":[{"address":"azurerm_network_security_group.app-nsg","mode":"managed","type":"azurerm_network_security_group","name":"app-nsg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"constant_value":"app-nsg"},"resource_group_name":{"references":["var.resource_group"]},"security_rule":{"constant_value":[{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"22","destination_port_ranges":null,"direction":"Inbound","name":"ssh-rule-1","priority":100,"protocol":"Tcp","source_address_prefix":"10.210.1.0/24","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null},{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"22","destination_port_ranges":null,"direction":"Outbound","name":"ssh-rule-2","priority":101,"protocol":"Tcp","source_address_prefix":"10.210.1.0/24","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null}]}},"schema_version":0},{"address":"azurerm_network_security_group.db-nsg","mode":"managed","type":"azurerm_network_security_group","name":"db-nsg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"constant_value":"db-nsg"},"resource_group_name":{"references":["var.resource_group"]},"security_rule":{"constant_value":[{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"3306","destination_port_ranges":null,"direction":"Inbound","name":"ssh-rule-1","priority":101,"protocol":"Tcp","source_address_prefix":"10.210.2.0/24","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null},{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"3306","destination_port_ranges":null,"direction":"Outbound","name":"ssh-rule-2","priority":102,"protocol":"Tcp","source_address_prefix":"10.210.2.0/24","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null},{"access":"Deny","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"3306","destination_port_ranges":null,"direction":"Outbound","name":"ssh-rule-3","priority":100,"protocol":"Tcp","source_address_prefix":"10.210.1.0/24","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null}]}},"schema_version":0},{"address":"azurerm_network_security_group.web-nsg","mode":"managed","type":"azurerm_network_security_group","name":"web-nsg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"constant_value":"web-nsg"},"resource_group_name":{"references":["var.resource_group"]},"security_rule":{"constant_value":[{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"22","destination_port_ranges":null,"direction":"Inbound","name":"ssh-rule-1","priority":101,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null},{"access":"Deny","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"22","destination_port_ranges":null,"direction":"Inbound","name":"ssh-rule-2","priority":100,"protocol":"Tcp","source_address_prefix":"10.210.3.0/24","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null}]}},"schema_version":0},{"address":"azurerm_subnet_network_security_group_association.app-nsg-subnet","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"app-nsg-subnet","provider_config_key":"azurerm","expressions":{"network_security_group_id":{"references":["azurerm_network_security_group.app-nsg.id","azurerm_network_security_group.app-nsg"]},"subnet_id":{"references":["var.app_subnet_id"]}},"schema_version":0},{"address":"azurerm_subnet_network_security_group_association.db-nsg-subnet","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"db-nsg-subnet","provider_config_key":"azurerm","expressions":{"network_security_group_id":{"references":["azurerm_network_security_group.db-nsg.id","azurerm_network_security_group.db-nsg"]},"subnet_id":{"references":["var.db_subnet_id"]}},"schema_version":0},{"address":"azurerm_subnet_network_security_group_association.web-nsg-subnet","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"web-nsg-subnet","provider_config_key":"azurerm","expressions":{"network_security_group_id":{"references":["azurerm_network_security_group.web-nsg.id","azurerm_network_security_group.web-nsg"]},"subnet_id":{"references":["var.web_subnet_id"]}},"schema_version":0,"depends_on":["azurerm_network_security_group.web-nsg"]}],"variables":{"app_subnet_id":{},"db_subnet_id":{},"location":{},"resource_group":{},"web_subnet_id":{}}},"depends_on":["module.resourcegroup","module.vnet_module"]},"resourcegroup":{"source":"./modules/resourcegroup","expressions":{"environment":{"references":["var.environment"]},"location":{"references":["var.location"]},"name":{"references":["var.name"]}},"module":{"outputs":{"location_id":{"expression":{"references":["azurerm_resource_group.rsg_grp.location","azurerm_resource_group.rsg_grp"]},"description":"Location id of the resource group"},"rg_name":{"expression":{"references":["azurerm_resource_group.rsg_grp.name","azurerm_resource_group.rsg_grp"]},"description":"Name of the resource group."}},"resources":[{"address":"azurerm_resource_group.rsg_grp","mode":"managed","type":"azurerm_resource_group","name":"rsg_grp","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.name"]},"tags":{"references":["var.environment"]}},"schema_version":0}],"variables":{"environment":{"default":"dev","description":"Environment to deploy"},"location":{},"name":{}}}},"vm_compute":{"source":"./modules/vm_compute","expressions":{"app_host_name":{"references":["var.app_host_name"]},"app_os_password":{"references":["var.app_os_password"]},"app_subnet_id":{"references":["module.vnet_module.appsubnet_id","module.vnet_module"]},"app_username":{"references":["var.app_username"]},"environment":{"references":["var.environment"]},"location":{"references":["module.resourcegroup.location_id","module.resourcegroup"]},"resource_group":{"references":["module.resourcegroup.rg_name","module.resourcegroup"]},"web_host_name":{"references":["var.web_host_name"]},"web_os_password":{"references":["var.web_os_password"]},"web_subnet_id":{"references":["module.vnet_module.websubnet_id","module.vnet_module"]},"web_username":{"references":["var.web_username"]}},"module":{"resources":[{"address":"azurerm_availability_set.app_availabilty_set","mode":"managed","type":"azurerm_availability_set","name":"app_availabilty_set","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"constant_value":"app_availabilty_set"},"resource_group_name":{"references":["var.resource_group"]}},"schema_version":0},{"address":"azurerm_availability_set.web_availabilty_set","mode":"managed","type":"azurerm_availability_set","name":"web_availabilty_set","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"constant_value":"web_availabilty_set"},"resource_group_name":{"references":["var.resource_group"]}},"schema_version":0},{"address":"azurerm_network_interface.app-net-interface","mode":"managed","type":"azurerm_network_interface","name":"app-net-interface","provider_config_key":"azurerm","expressions":{"ip_configuration":[{"name":{"constant_value":"app-webserver"},"private_ip_address_allocation":{"constant_value":"Dynamic"},"subnet_id":{"references":["var.app_subnet_id"]}}],"location":{"references":["var.location"]},"name":{"constant_value":"app-network"},"resource_group_name":{"references":["var.resource_group"]}},"schema_version":0},{"address":"azurerm_network_interface.web-net-interface","mode":"managed","type":"azurerm_network_interface","name":"web-net-interface","provider_config_key":"azurerm","expressions":{"ip_configuration":[{"name":{"constant_value":"web-webserver"},"private_ip_address_allocation":{"constant_value":"Dynamic"},"subnet_id":{"references":["var.web_subnet_id"]}}],"location":{"references":["var.location"]},"name":{"constant_value":"web-network"},"resource_group_name":{"references":["var.resource_group"]}},"schema_version":0},{"address":"azurerm_virtual_machine.app-vm","mode":"managed","type":"azurerm_virtual_machine","name":"app-vm","provider_config_key":"azurerm","expressions":{"availability_set_id":{"references":["azurerm_availability_set.web_availabilty_set.id","azurerm_availability_set.web_availabilty_set"]},"delete_os_disk_on_termination":{"constant_value":true},"location":{"references":["var.location"]},"name":{"references":["var.environment"]},"network_interface_ids":{"references":["azurerm_network_interface.app-net-interface.id","azurerm_network_interface.app-net-interface"]},"os_profile":[{"admin_password":{"references":["var.app_os_password"]},"admin_username":{"references":["var.app_username"]},"computer_name":{"references":["var.app_host_name"]}}],"os_profile_linux_config":[{"disable_password_authentication":{"constant_value":false}}],"resource_group_name":{"references":["var.resource_group"]},"storage_image_reference":[{"offer":{"constant_value":"UbuntuServer"},"publisher":{"constant_value":"Canonical"},"sku":{"constant_value":"22.04-LTS"},"version":{"constant_value":"latest"}}],"storage_os_disk":[{"caching":{"constant_value":"ReadWrite"},"create_option":{"constant_value":"FromImage"},"managed_disk_type":{"constant_value":"Standard_LRS"},"name":{"constant_value":"app-disk"}}],"vm_size":{"constant_value":"Standard_D2s_v3"}},"schema_version":0},{"address":"azurerm_virtual_machine.web-vm","mode":"managed","type":"azurerm_virtual_machine","name":"web-vm","provider_config_key":"azurerm","expressions":{"availability_set_id":{"references":["azurerm_availability_set.web_availabilty_set.id","azurerm_availability_set.web_availabilty_set"]},"delete_os_disk_on_termination":{"constant_value":true},"location":{"references":["var.location"]},"name":{"references":["var.environment"]},"network_interface_ids":{"references":["azurerm_network_interface.web-net-interface.id","azurerm_network_interface.web-net-interface"]},"os_profile":[{"admin_password":{"references":["var.web_os_password"]},"admin_username":{"references":["var.web_username"]},"computer_name":{"references":["var.web_host_name"]}}],"os_profile_linux_config":[{"disable_password_authentication":{"constant_value":false}}],"resource_group_name":{"references":["var.resource_group"]},"storage_image_reference":[{"offer":{"constant_value":"UbuntuServer"},"publisher":{"constant_value":"Canonical"},"sku":{"constant_value":"22.04-LTS"},"version":{"constant_value":"latest"}}],"storage_os_disk":[{"caching":{"constant_value":"ReadWrite"},"create_option":{"constant_value":"FromImage"},"managed_disk_type":{"constant_value":"Standard_LRS"},"name":{"constant_value":"web-disk"}}],"vm_size":{"constant_value":"Standard_D2s_v3"}},"schema_version":0}],"variables":{"app_host_name":{},"app_os_password":{},"app_subnet_id":{},"app_username":{},"environment":{},"location":{},"resource_group":{},"web_host_name":{},"web_os_password":{},"web_subnet_id":{},"web_username":{}}},"depends_on":["module.resourcegroup","module.vnet_module","module.nsgroup"]},"vnet_module":{"source":"./modules/vnet_module","expressions":{"appsubnet_iprange":{"references":["var.appsubnet_iprange"]},"dbsubnet_iprange":{"references":["var.dbsubnet_iprange"]},"environment":{"references":["var.environment"]},"location":{"references":["module.resourcegroup.location_id","module.resourcegroup"]},"resource_group":{"references":["module.resourcegroup.rg_name","module.resourcegroup"]},"vnet_iprange":{"references":["var.vnet_iprange"]},"websubnet_iprange":{"references":["var.websubnet_iprange"]}},"module":{"outputs":{"appsubnet_id":{"expression":{"references":["azurerm_subnet.app-subnet.id","azurerm_subnet.app-subnet"]},"description":"Id of the appsubnet in the network"},"dbsubnet_id":{"expression":{"references":["azurerm_subnet.db-subnet.id","azurerm_subnet.db-subnet"]},"description":"Id of the dbsubnet in the network"},"network_name":{"expression":{"references":["azurerm_virtual_network.vnet01.name","azurerm_virtual_network.vnet01"]},"description":"Name of the Virtual network"},"websubnet_id":{"expression":{"references":["azurerm_subnet.web-subnet.id","azurerm_subnet.web-subnet"]},"description":"Id of the websubnet in the network"}},"resources":[{"address":"azurerm_subnet.app-subnet","mode":"managed","type":"azurerm_subnet","name":"app-subnet","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["var.appsubnet_iprange"]},"name":{"references":["var.environment"]},"resource_group_name":{"references":["var.resource_group"]},"virtual_network_name":{"references":["azurerm_virtual_network.vnet01.name","azurerm_virtual_network.vnet01"]}},"schema_version":0,"depends_on":["azurerm_virtual_network.vnet01"]},{"address":"azurerm_subnet.db-subnet","mode":"managed","type":"azurerm_subnet","name":"db-subnet","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["var.dbsubnet_iprange"]},"name":{"references":["var.environment"]},"resource_group_name":{"references":["var.resource_group"]},"virtual_network_name":{"references":["azurerm_virtual_network.vnet01.name","azurerm_virtual_network.vnet01"]}},"schema_version":0,"depends_on":["azurerm_virtual_network.vnet01"]},{"address":"azurerm_subnet.web-subnet","mode":"managed","type":"azurerm_subnet","name":"web-subnet","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["var.websubnet_iprange"]},"name":{"references":["var.environment"]},"resource_group_name":{"references":["var.resource_group"]},"virtual_network_name":{"references":["azurerm_virtual_network.vnet01.name","azurerm_virtual_network.vnet01"]}},"schema_version":0,"depends_on":["azurerm_virtual_network.vnet01"]},{"address":"azurerm_virtual_network.vnet01","mode":"managed","type":"azurerm_virtual_network","name":"vnet01","provider_config_key":"azurerm","expressions":{"address_space":{"references":["var.vnet_iprange"]},"location":{"references":["var.location"]},"name":{"references":["var.environment","var.location"]},"resource_group_name":{"references":["var.resource_group"]}},"schema_version":0}],"variables":{"appsubnet_iprange":{},"dbsubnet_iprange":{},"environment":{},"location":{},"resource_group":{},"vnet_iprange":{},"websubnet_iprange":{}}},"depends_on":["module.resourcegroup"]}},"variables":{"app_host_name":{},"app_os_password":{},"app_username":{},"appsubnet_iprange":{},"dbsubnet_iprange":{},"environment":{},"location":{},"name":{},"primary_database":{},"primary_database_admin":{},"primary_database_password":{},"primary_database_version":{},"vnet_iprange":{},"web_host_name":{},"web_os_password":{},"web_username":{},"websubnet_iprange":{}}}},"relevant_attributes":[{"resource":"module.resourcegroup.azurerm_resource_group.rsg_grp","attribute":["name"]},{"resource":"module.vnet_module.azurerm_subnet.db-subnet","attribute":["id"]},{"resource":"module.vnet_module.azurerm_subnet.web-subnet","attribute":["id"]},{"resource":"module.vnet_module.azurerm_subnet.app-subnet","attribute":["id"]},{"resource":"module.backend_db.azurerm_mssql_server.sqlserver01","attribute":["id"]},{"resource":"module.nsgroup.azurerm_network_security_group.db-nsg","attribute":["id"]},{"resource":"module.nsgroup.azurerm_network_security_group.web-nsg","attribute":["id"]},{"resource":"module.resourcegroup.azurerm_resource_group.rsg_grp","attribute":["location"]},{"resource":"module.vm_compute.azurerm_network_interface.web-net-interface","attribute":["id"]},{"resource":"module.vnet_module.azurerm_virtual_network.vnet01","attribute":["name"]},{"resource":"module.nsgroup.azurerm_network_security_group.app-nsg","attribute":["id"]},{"resource":"module.vm_compute.azurerm_availability_set.web_availabilty_set","attribute":["id"]},{"resource":"module.vm_compute.azurerm_network_interface.app-net-interface","attribute":["id"]}]}
